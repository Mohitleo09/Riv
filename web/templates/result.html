{% extends "base.html" %}
{% block title %}Order Confirmed{% endblock %}
{% block topbar_title %}Order Result{% endblock %}

{% block content %}

<div class="result-box">

    <!-- Header -->
    <div class="result-header">
        <div class="result-icon">
            {% if order.status == 'FILLED' %}‚úÖ
            {% elif order.status == 'NEW' %}üü°
            {% else %}üìã
            {% endif %}
        </div>
        <h2>
            {% if order.status == 'FILLED' %}Order Filled
            {% elif order.status == 'NEW' %}Order Accepted
            {% else %}Order Submitted
            {% endif %}
        </h2>
        <p class="text-muted">
            {% if order.status == 'FILLED' %}
            Your order was executed immediately on Binance Futures Testnet.
            {% elif order.status == 'NEW' %}
            Your limit order is now live and waiting for a match.
            {% else %}
            Order has been submitted to Binance Futures Testnet.
            {% endif %}
        </p>
    </div>

    <!-- Details card -->
    <div class="card" style="margin-bottom:1.25rem;">
        <p class="card-title">Order Details</p>
        <table class="kv-table">
            <tr>
                <td>Order ID</td>
                <td class="fw-600 text-accent">{{ order.orderId }}</td>
            </tr>
            <tr>
                <td>Client Order ID</td>
                <td>{{ order.clientOrderId }}</td>
            </tr>
            <tr>
                <td>Symbol</td>
                <td class="fw-600">{{ order.symbol }}</td>
            </tr>
            <tr>
                <td>Side</td>
                <td>
                    <span class="badge {% if order.side == 'BUY' %}badge-green{% else %}badge-red{% endif %}">
                        {{ order.side }}
                    </span>
                </td>
            </tr>
            <tr>
                <td>Order Type</td>
                <td><span class="badge badge-gray">{{ order_type }}</span></td>
            </tr>
            {% if order.timeInForce and order.timeInForce != 'NONE' and order.timeInForce != 'GTX' %}
            <tr>
                <td>Time In Force</td>
                <td>{{ order.timeInForce }}</td>
            </tr>
            {% endif %}
            <tr>
                <td>Qty Ordered</td>
                <td>{{ order.origQty }}</td>
            </tr>
            <tr>
                <td>Qty Executed</td>
                <td class="fw-600">{{ order.executedQty }}</td>
            </tr>
            {% set avg = order.avgPrice or order.price %}
            <tr>
                <td>Avg / Limit Price</td>
                <td class="fw-600">
                    {% if avg and avg != '0' and avg != '0.00000' %}{{ avg }} USDT{% else %}‚Äî{% endif %}
                </td>
            </tr>
            {% if order.stopPrice and order.stopPrice != '0' %}
            <tr>
                <td>Stop Price</td>
                <td>{{ order.stopPrice }} USDT</td>
            </tr>
            {% endif %}
            <tr>
                <td>Status</td>
                <td>
                    {% if order.status == 'FILLED' %}
                    <span class="badge badge-green">FILLED</span>
                    {% elif order.status == 'NEW' %}
                    <span class="badge badge-yellow">NEW</span>
                    {% elif order.status in ['CANCELED','REJECTED','EXPIRED'] %}
                    <span class="badge badge-red">{{ order.status }}</span>
                    {% else %}
                    <span class="badge badge-gray">{{ order.status }}</span>
                    {% endif %}
                </td>
            </tr>
        </table>
    </div>

    <!-- Actions -->
    <div class="flex gap-1">
        <a href="{{ url_for('order_form') }}" class="btn btn-primary">+ Place Another Order</a>
        <a href="{{ url_for('dashboard') }}" class="btn btn-ghost">‚Üê Back to Dashboard</a>
    </div>

</div>

{% endblock %}